# Host onde o PostgreSQL roda (utilizado no datasource.url)
POSTGRES_HOST=localhost
# Usuário do PostgreSQL
POSTGRES_USER=tcc
# Senha do usuário do PostgreSQL
POSTGRES_PASSWORD=tcc123
# Nome do banco de dados
POSTGRES_DB=tccdb
# Porta de exposição do PostgreSQL
POSTGRES_PORT=5432
# Cenário de inicialização do banco (pasta em ./bd): c1 | c2a1 | c2a2 | c1a1 | c1a2
BD_CENARIO=c1
# Caminho de dados interno do Postgres (mapeado no container)
PGDATA=/var/lib/postgresql/data/pgdata

# Portas dos serviços (host)
GRADUACAO_PORT=8081
POS_GRADUACAO_PORT=8082
DIPLOMAS_PORT=8083
ASSINATURA_PORT=8084

# Portas de monitoramento (host)
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
POSTGRES_EXPORTER_PORT=9187

# Kafka / Connect (host)
KAFKA_PORT=9092
CONNECT_PORT=18083

# Overlay de CDC (aplicar apenas com compose/db.cdc.yml)
PG_WAL_LEVEL=logical
PG_MAX_WAL_SENDERS=10
PG_MAX_REPLICATION_SLOTS=10
PG_MAX_SLOT_WAL_KEEP_SIZE=1GB

# Variáveis específicas do serviço de Graduação (prefixo PGR_ para evitar conflito com outros serviços)
PGR_POSTGRES_HOST=localhost
PGR_POSTGRES_PASSWORD=tcc123
PGR_POSTGRES_DB=tccdb
PGR_POSTGRES_PORT=5432
# Execução local de um único serviço (fora do compose)
PGR_DEFAULT_SCHEMA=public
# Execução via docker compose (um schema por serviço no cenário C2)
GRADUACAO_DEFAULT_SCHEMA=public
POS_GRADUACAO_DEFAULT_SCHEMA=public
DIPLOMAS_DEFAULT_SCHEMA=public
ASSINATURA_DEFAULT_SCHEMA=public

# C3 (bancos por serviço) - ajuste opcional
GRADUACAO_DB_NAME=tcc_graduacao
GRADUACAO_DB_PORT=5434
GRADUACAO_DB_USER=tcc
GRADUACAO_DB_PASSWORD=tcc123

POS_GRADUACAO_DB_NAME=tcc_pos_graduacao
POS_GRADUACAO_DB_PORT=5435
POS_GRADUACAO_DB_USER=tcc
POS_GRADUACAO_DB_PASSWORD=tcc123

DIPLOMAS_DB_NAME=tcc_diplomas
DIPLOMAS_DB_PORT=5436
DIPLOMAS_DB_USER=tcc
DIPLOMAS_DB_PASSWORD=tcc123

ASSINATURA_DB_NAME=tcc_assinatura
ASSINATURA_DB_PORT=5437
ASSINATURA_DB_USER=tcc
ASSINATURA_DB_PASSWORD=tcc123

# Nível de log para infraestrutura (Hibernate/Hikari). Ajuste para WARN/ERROR em produção.
INFRA_LOG_LEVEL=INFO

# k6 load test settings (optional)
# Path opcional do .env usado pelo k6 (default: .env)
ENV_FILE=.env
# Base URL for graduacao service
GRADUACAO_BASE_URL=http://localhost:8081
# Profile: leve | medio | pesado (when set, uses stages)
TEST_PROFILE=
# Fallback fixed VUs/duration when TEST_PROFILE is empty
VUS=1
DURATION=30s
# Thresholds (k6)
K6_HTTP_REQ_FAILED=rate<0.01
K6_HTTP_REQ_DURATION=p(95)<1200
K6_CHECKS=rate>0.95
# Intervalo entre iterações (segundos). Use 0 para carga continua.
SLEEP_S=1
# Stage profiles as JSON arrays (optional overrides)
K6_PROFILE_LEVE_STAGES=[{"duration":"20s","target":2},{"duration":"40s","target":2},{"duration":"10s","target":0}]
K6_PROFILE_MEDIO_STAGES=[{"duration":"20s","target":5},{"duration":"40s","target":10},{"duration":"40s","target":10},{"duration":"20s","target":0}]
K6_PROFILE_PESADO_STAGES=[{"duration":"30s","target":10},{"duration":"60s","target":25},{"duration":"60s","target":50},{"duration":"30s","target":0}]
# Execution mode (obrigatório): constant-vus | ramping-vus | constant-arrival-rate | ramping-arrival-rate
K6_EXECUTION_MODE=
# Arrival-rate settings (use with K6_EXECUTION_MODE=constant-arrival-rate ou ramping-arrival-rate)
# Perfil de carga para arrival-rate modes: leve | medio | pesado (default: leve)
K6_ARRIVAL_PROFILE=leve
# Customização avançada (opcional - sobrescreve valores do perfil)
K6_ARRIVAL_TIME_UNIT=1s
K6_ARRIVAL_START_RATE=10
K6_ARRIVAL_RATE=20
K6_ARRIVAL_DURATION=3m
K6_ARRIVAL_PREALLOCATED_VUS=50
K6_ARRIVAL_MAX_VUS=200
K6_ARRIVAL_STAGES=[{"duration":"1m","target":20},{"duration":"2m","target":50},{"duration":"2m","target":100},{"duration":"1m","target":0}]
